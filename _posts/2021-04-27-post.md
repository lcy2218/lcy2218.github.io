---
layout: post
title:  NAT技术
date: 2021-04-27 17:41 +0900
category: routing-theory
---

## 0x0 为什么使用NAT技术?(why)

- IPv4地址紧张，大多数情况下，一个用户只能获取一个公网IP，但是需要上网设备远不止一台。这些设备想要上网，就得共享用户所获得的公网地址。

## 0x1 如何使用NAT技术?(how)

- nat分为**静态NAT**和**动态NAT**
1. 静态NAT用于**公网设备**访问**内网服务器**
2. 动态NAT用于**内网设备**访问**公网设备**
![](/images/20210427-2.png)
   - 区别:
   - 动态NAT是一种通过流量触发的技术
   - 静态NAT是需要人来手工配置的
    >-----------------------
   - 动态NAT是使用进行***源地址***转化
   - 静态NAT是使用进行***目的地址***转化
- nat分为**1对1的NAT**和**1对多的PAT**
1. 1对1的就是只有在IP地址够用的情况下才会使用
2. 1对多比较常见，带端口转化
![](/images/20210427-1.png)

***所以一共有4种NAT技术***
1. 动态NAT
2. 静态NAT
3. 动态PAT
4. 静态PAT

- nat的过程
  1. 转换
  2. 生成转化关系表
  3. 还原

## 0x2 应用NAT技术的结果?(what)

- 用用完NAT技术后，就可以让多个内网设备共享一个外网地址，从而解决IP地址不够用的问题

## 0x3 抓包分析

- 请参考[ensp_NAT地址转化相关场景](https://lcy2218.github.io/routing-practice/2021/03/29/post1.html)