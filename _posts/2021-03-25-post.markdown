---
layout: post
title:  ensp_简单静态路由
date: 2021-03-25 18:18:29 +0900
category: routing
---

<!-- TOC -->

- [0x0 路由相关知识](#0x0-路由相关知识)
- [0x1 拓扑图](#0x1-拓扑图)
- [0x2 配置指令](#0x2-配置指令)
- [0x3 连通性测试](#0x3-连通性测试)

<!-- /TOC -->

## 0x0 路由相关知识
1. 路由表的必要参数  
- 目标网段、子网掩码、连接方式、优先级（数值越小）、度量值（开销）  

2. 静态路由使用条件  
- 只有直连路由，但是需要去非直连的路由  

3. 协议之间存在优先级  
- direct> ospf> static> rip  

4. IP路由匹配
- 目的ip 10.4.1.1  
- 10.4.1.0 24  
- 10.4.1.1 32 &emsp;走这一跳  
- 最长子网掩码匹配原则

## 0x1 拓扑图
![](/images/20210325-1.png)
- 要求
1. 各个设备互通
2. 配置各个网段的静态路由


## 0x2 配置指令
- 路由器接口配置IP
1. R2
```c
int e0/0/1
ip add 192.168.18.1  255.255.255.224
int g0/0/0
ip add 192.168.18.33  255.255.255.240
int e0/0/0
ip add 192.168.1.2  255.255.255.252
```
2. r1
```c
int g0/0/1
ip add 192.168.1.1  255.255.255.252
int e0/0/0
ip add 192.168.10.1  255.255.255.0
int e0/0/1
ip add 192.168.2.9  255.255.255.248
int e0/0/0
ip add 192.168.1.5  255.255.255.252
```
3. r3
```c
int e0/0/0
ip add 192.168.1.6  255.255.255.252
int e0/0/1
ip add 192.168.22.1  255.255.255.192
```
- 静态路由配置
1. r2
```c
ip route-static 192.168.1.4 255.255.255.252 192.168.1.1
ip route-static 192.168.2.8 255.255.255.248 192.168.1.1
ip route-static 192.168.10.0 255.255.255.0 192.168.1.1
ip route-static 192.168.22.0 255.255.255.192 192.168.1.1
```
2. r1
```c
ip route-static 192.168.18.0 255.255.255.224 192.168.1.2
ip route-static 192.168.18.32 255.255.255.240 192.168.1.2
ip route-static 192.168.22.0 255.255.255.192 192.168.1.6
```
3. r3
```c
ip route-static 192.168.1.0 255.255.255.252 192.168.1.5
ip route-static 192.168.2.8 255.255.255.248 192.168.1.5
ip route-static 192.168.10.0 255.255.255.0 192.168.1.5
ip route-static 192.168.18.0 255.255.255.224 192.168.1.5
```
## 0x3 连通性测试
- pc1 -> pc5
![](/images/20210325-2.png)
- pc1 -> r1 g0/0/0(192.168.1.5/30)
![](/images/20210325-3.png)
- pc3 -> pc6
![](/images/20210325-4.png)
