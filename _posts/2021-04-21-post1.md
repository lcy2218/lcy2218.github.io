---
layout: post
title:  关于路由交换的一些总结
date: 2021-04-21 15:55 +0900
category: skill-summary
---
<!-- TOC -->

- [0x0 OSI7层模型以及常用的TCP/IP五层模型](#0x0-osi7层模型以及常用的tcpip五层模型)
- [0x1 数据的变化过程](#0x1-数据的变化过程)
- [0x2 数据链路层、网络层、传输层的常见报文格式](#0x2-数据链路层网络层传输层的常见报文格式)
    - [0x2-1 数据链路层：以太网数据帧](#0x2-1-数据链路层以太网数据帧)
    - [0x2-2 网络层：IP数据包](#0x2-2-网络层ip数据包)
    - [0x2-3 传输层：数据段](#0x2-3-传输层数据段)
    - [0x2-4 各个层次常用协议汇总](#0x2-4-各个层次常用协议汇总)
- [0x3 唯一标识符和上层协议标识符的区别](#0x3-唯一标识符和上层协议标识符的区别)

<!-- /TOC -->
## 0x0 OSI7层模型以及常用的TCP/IP五层模型

![](/images/20210421-1-2.png)
1. 物理层：传输bit流
1. 链路层：编帧，数据链路的建立、维持和释放
1. 网络层：编址、路由、寻址
1. 传输层：建立端到端的连接（进程到进程）
1. 会话层：告诉传输层何时发送数据，什么时候停止发送数据
1. 表示层：ascill，JPEG，mpeg，描述数据
1. 应用层：为应用程序提供网络服务

- 数据链路层使用的是***frame帧***
- 网络层使用的是***packet包***
- 传输层使用的是***segment段***  

## 0x1 数据的变化过程

![](/images/20210421-1-3.png)
- 数据在从应用层到物理层是一个套娃的过程，每向下一层都要进行***封装***
- 数据在从物理层到应用层也是一个套娃的过程，每向上一层都要进行***解封装***

## 0x2 数据链路层、网络层、传输层的常见报文格式

### 0x2-1 数据链路层：以太网数据帧
![](/images/20210421-1-4.png)
- 字段
    1. 目的MAC
    2. 源MCA
    3. 类型号
    4. 数据
    5. FCS校验
- ***类型号***里面包含的信息用来标志***网络层***使用的是什么协议，以便接收端把收到的MAC帧的数据部分上交给上一层的这个协议
- 例如，当类型字段的值是0x0800时，就表示上层使用的是IP数据报
![](/images/20210421-1-5.png)

### 0x2-2 网络层：IP数据包

- IP包头
![](/images/20210421-1-6.png)
- [字段的基本含义](https://lcy2218.github.io/routing-theory/2021/04/20/post.html#0x1-ip%E5%8C%85%E5%A4%B4%E7%9A%84%E7%BB%93%E6%9E%84)
- ***协议号***：用来标识上层-**传输层**协议(TCP?UDP?)
![](/images/20210421-1-7.png)

### 0x2-3 传输层：数据段

- TCP包头
![](/images/20210421-1-8.png)
- [字段的基本含义](https://lcy2218.github.io/routing-theory/2021/04/20/post.html#0x6-tcp%E5%8C%85%E5%A4%B4%E7%9A%84%E7%BB%93%E6%9E%84)
![](/images/20210421-1-9.png)
- UPD包头
![](/images/20210421-1-12.png)
- [字段的基本含义](https://lcy2218.github.io/routing-theory/2021/04/20/post.html#0xc-udp%E7%9A%84%E4%BC%AAip%E5%A4%B4%E9%83%A8)
![](/images/20210421-1-10.png)
- ***端口号***：用来标识上层-**应用层**协议(FTP?SMTP?HTTP?)

### 0x2-4 各个层次常用协议汇总

![](/images/20210421-1-11.png)


## 0x3 唯一标识符和上层协议标识符的区别

- 唯一标识符是用来确保本层通信的唯一性的
    1. 数据链路层使用的是***mac地址***
    1. 网络层使用的是***IP地址***
    1. 传输层使用的是***port端口号***

- 上层协议标识符用来表示上一层使用的是什么协议
    1. 数据链路层的是***类型号***，用来标识***网络层***使用的协议
    1. 网络层使用的是***协议号***，用来标识***传输层***使用的协议
    1. 传输层使用的是***端口号***，用来标识***应用层***使用的协议
